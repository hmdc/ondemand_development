{
  "version": 3,
  "sources": ["../../../javascript/files/globus.js"],
  "sourcesContent": ["var globus_endpoints;\n\n$(document).ready(function() {\n    globus_endpoints = $(\"#globus_endpoints\").data(\"globusEndpoints\");\n});\n\n/**\n * Given a directory name, return the associated Globus endpoint and path\n * @params {string} directory Directory name\n * @return {string|undefined} Globus endpoint ID\n */\nfunction getEndpointInfo(directory) {\n  for (const endpoint of globus_endpoints) {\n    if (directory.startsWith(endpoint[\"path\"])) {\n      return endpoint;\n    }\n  }\n}\n\n/**\n * Generate a link to the Globus transfer app\n * @params {string} directory Directory name\n * @return {string|null} Globus transfer app URL with directory and endpoint populated\n */\nexport function getGlobusLink(directory) {\n  let info = getEndpointInfo(directory);\n  if (info) {\n    let origin_path = directory.replace(info.path, info.endpoint_path);\n    origin_path = origin_path.replace(\"//\", \"/\");\n    url = \"https://app.globus.org/file-manager?origin_id=\" + info.endpoint + \"&origin_path=\" + origin_path;\n    return url\n  }\n}\n\n/**\n * Enable or disable the Globus button and update the tooltip based on current directory\n * @params {string} directory Filesystem directory name\n * @params {object} link The link object whose href value will change\n * @params {object} wrapper The wrapper containing the link whose tooltip title will change\n * @return undefined\n */\nexport function updateGlobusLink(directory, link, wrapper) {\n  let info = getEndpointInfo(directory);\n  if (info) {\n    link.removeClass(\"disabled\");\n    wrapper.prop(\"title\", \"Open the current directory with Globus\");\n  } \n  else {\n    link.addClass(\"disabled\");\n    wrapper.prop(\"title\", \"No Globus endpoint associated with this directory\");\n  }\n}\n"],
  "mappings": ";AAAA,IAAI;AAEJ,EAAE,QAAQ,EAAE,MAAM,WAAW;AACzB,qBAAmB,EAAE,mBAAmB,EAAE,KAAK,iBAAiB;AACpE,CAAC;AAOD,SAAS,gBAAgB,WAAW;AAClC,aAAW,YAAY,kBAAkB;AACvC,QAAI,UAAU,WAAW,SAAS,OAAO,GAAG;AAC1C,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAOO,SAAS,cAAc,WAAW;AACvC,MAAI,OAAO,gBAAgB,SAAS;AACpC,MAAI,MAAM;AACR,QAAI,cAAc,UAAU,QAAQ,KAAK,MAAM,KAAK,aAAa;AACjE,kBAAc,YAAY,QAAQ,MAAM,GAAG;AAC3C,UAAM,mDAAmD,KAAK,WAAW,kBAAkB;AAC3F,WAAO;AAAA,EACT;AACF;AASO,SAAS,iBAAiB,WAAW,MAAM,SAAS;AACzD,MAAI,OAAO,gBAAgB,SAAS;AACpC,MAAI,MAAM;AACR,SAAK,YAAY,UAAU;AAC3B,YAAQ,KAAK,SAAS,wCAAwC;AAAA,EAChE,OACK;AACH,SAAK,SAAS,UAAU;AACxB,YAAQ,KAAK,SAAS,mDAAmD;AAAA,EAC3E;AACF;",
  "names": []
}
