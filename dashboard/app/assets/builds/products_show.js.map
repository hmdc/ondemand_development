{
  "version": 3,
  "sources": ["../../javascript/products_show.js"],
  "sourcesContent": ["'use strict';\n\nconst id = 'product_cli_modal';\nconst spinnerId = `${id}_spinner`;\nconst headerId = `${id}_header`;\nconst buttonId = `${id}_button`;\nconst closeButton = `<button id=\"${buttonId}\" class=\"btn-close float-end\" data-bs-dismiss=\"modal\"></button>`;\n\njQuery(function(){\n  $('[data-toggle=\"cli\"]').on('click', (event) => updateModal(event));\n\n  $(`#${headerId}`).replaceWith(`\n    <h2>\n      <span>no action</pan>\n      ${closeButton}\n    </h2>\n  `);\n});\n\nfunction updateModal(event){\n  const button = $(`#${event.target['id']}`);\n  if(button === undefined || button.data() == {}) { return; }\n\n  const title = button.data('title');\n  const cmd = button.data('cmd');\n  const target = button.data('target');\n  const header = `\\$ <code><strong>${cmd}</strong></code>\\n`\n\n  $(`#${headerId}`).replaceWith(`\n    <h2>\n      <span>${title}</pan>\n      ${closeButton}\n    </h2>\n  `);\n\n  const xhr = new XMLHttpRequest;\n  xhr.onreadystatechange = function() {\n    if(this.status == 200){\n      $(`#${id} .product-cli-body`).html(`${header}${this.responseText}`);\n      $(`#${id} .product-cli-body`).scrollTop($(`#${id} .product-cli-body`)[0].scrollHeight);\n    }\n  };\n\n  xhr.onloadend = function() {\n    $(`#${spinnerId}`).replaceWith(`\n      <button class=\"btn-close float-end\" data-bs-dismiss=\"modal\">&times;</button>\n    `);\n    if (this.status != 200) {\n      $(`#${id} .product-cli-body`).html(`${header}A fatal error has occurred`);\n    };\n  };\n\n  xhr.open('PATCH', target);\n  xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'))\n  xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  xhr.send();\n  // FIXMME: using window here bc modal is a bootstrap import and there are multiple\n  // $ and jQuery's out there.\n  window.jQuery(`#${id}`).modal('show');\n}\n"],
  "mappings": ";AAEA,IAAM,KAAK;AACX,IAAM,YAAY,GAAG;AACrB,IAAM,WAAW,GAAG;AACpB,IAAM,WAAW,GAAG;AACpB,IAAM,cAAc,eAAe;AAEnC,OAAO,WAAU;AACf,IAAE,qBAAqB,EAAE,GAAG,SAAS,CAAC,UAAU,YAAY,KAAK,CAAC;AAElE,IAAE,IAAI,UAAU,EAAE,YAAY;AAAA;AAAA;AAAA,QAGxB;AAAA;AAAA,GAEL;AACH,CAAC;AAED,SAAS,YAAY,OAAM;AACzB,QAAM,SAAS,EAAE,IAAI,MAAM,OAAO,OAAO;AACzC,MAAG,WAAW,UAAa,OAAO,KAAK,KAAK,CAAC,GAAG;AAAE;AAAA,EAAQ;AAE1D,QAAM,QAAQ,OAAO,KAAK,OAAO;AACjC,QAAM,MAAM,OAAO,KAAK,KAAK;AAC7B,QAAM,SAAS,OAAO,KAAK,QAAQ;AACnC,QAAM,SAAS,mBAAoB;AAAA;AAEnC,IAAE,IAAI,UAAU,EAAE,YAAY;AAAA;AAAA,cAElB;AAAA,QACN;AAAA;AAAA,GAEL;AAED,QAAM,MAAM,IAAI;AAChB,MAAI,qBAAqB,WAAW;AAClC,QAAG,KAAK,UAAU,KAAI;AACpB,QAAE,IAAI,sBAAsB,EAAE,KAAK,GAAG,SAAS,KAAK,cAAc;AAClE,QAAE,IAAI,sBAAsB,EAAE,UAAU,EAAE,IAAI,sBAAsB,EAAE,GAAG,YAAY;AAAA,IACvF;AAAA,EACF;AAEA,MAAI,YAAY,WAAW;AACzB,MAAE,IAAI,WAAW,EAAE,YAAY;AAAA;AAAA,KAE9B;AACD,QAAI,KAAK,UAAU,KAAK;AACtB,QAAE,IAAI,sBAAsB,EAAE,KAAK,GAAG,kCAAkC;AAAA,IAC1E;AAAC;AAAA,EACH;AAEA,MAAI,KAAK,SAAS,MAAM;AACxB,MAAI,iBAAiB,gBAAgB,EAAE,yBAAyB,EAAE,KAAK,SAAS,CAAC;AACjF,MAAI,iBAAiB,oBAAoB,gBAAgB;AACzD,MAAI,KAAK;AAGT,SAAO,OAAO,IAAI,IAAI,EAAE,MAAM,MAAM;AACtC;",
  "names": []
}
